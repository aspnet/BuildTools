<!-- this is a dummy project designed to produce contentFiles packages -->
<Project>

  <PropertyGroup>
    <BaseOutputPath>$(NuspecBasePath)bin\</BaseOutputPath>
    <BaseIntermediateOutputPath>$(NuspecBasePath)obj\</BaseIntermediateOutputPath>
  </PropertyGroup>

  <Import Project="$([MSBuild]::GetDirectoryNameOfFileAbove($(NuspecBasePath), Directory.Build.props))\Directory.Build.props" Condition="Exists('$([MSBuild]::GetDirectoryNameOfFileAbove($(NuspecBasePath), Directory.Build.props))\Directory.Build.props')" />
  <Import Project="Sdk.props" Sdk="Microsoft.NET.Sdk" />

  <Target Name="VerifyProperties" BeforeTargets="Pack">
    <Error Text="Missing property: RepositoryRoot" Condition="'$(RepositoryRoot)'==''"/>
    <Error Text="Missing property: PackageId" Condition="'$(PackageId)'==''"/>
    <Error Text="Missing property: NuspecBasePath" Condition="'$(NuspecBasePath)'==''"/>
  </Target>

  <Import Project="$(RepositoryRoot)build\common.props" Condition="Exists('$(RepositoryRoot)build\common.props')" />
  <Import Project="$(NuspecBasePath)\sharedsources.props" Condition="Exists('$(NuspecBasePath)\sharedsources.props')" />

  <Target Name="WarnIfNoCommonProps" BeforeTargets="Pack">
    <Warning Text="Expected a props file in '$(RepositoryRoot)build\common.props' or '$([MSBuild]::GetDirectoryNameOfFileAbove($(NuspecBasePath), Directory.Build.props))\Directory.Build.props')'. Shared sources packages may be missing the right version number when this is left out."
             Condition="!Exists('$(RepositoryRoot)build\common.props') And !Exists('$([MSBuild]::GetDirectoryNameOfFileAbove($(NuspecBasePath), Directory.Build.props))\Directory.Build.props')"/>
  </Target>

  <PropertyGroup>
    <IsPackable>true</IsPackable>
    <NoBuild>true</NoBuild>
    <PackageOutputPath Condition="'$(PackageOutputPath)'==''">$(RepositoryRoot)artifacts\build</PackageOutputPath>
    <TargetFramework>netstandard1.0</TargetFramework>
    <EnableDefaultItems>false</EnableDefaultItems>
    <Description>$(PackageId)</Description>
    <IncludeBuildOutput>false</IncludeBuildOutput>
    <ContentTargetFolders>contentFiles</ContentTargetFolders>
    <DisableImplicitFrameworkReferences>true</DisableImplicitFrameworkReferences>
  </PropertyGroup>

  <ItemGroup Condition="'$(NuspecBasePath)'!=''">
    <Compile Include="$(NuspecBasePath)\**\*.cs" Exclude="$(BaseOutputPath);$(BaseIntermediateOutputPath);">
      <Pack>true</Pack>
      <PackagePath>$(ContentTargetFolders)\cs\netstandard1.0\</PackagePath>
    </Compile>
    <EmbeddedResource Include="$(NuspecBasePath)\**\*.resx" Exclude="$(BaseOutputPath);$(BaseIntermediateOutputPath);">
      <Pack>true</Pack>
      <PackagePath>$(ContentTargetFolders)\any\any\</PackagePath>
    </EmbeddedResource>
  </ItemGroup>

  <ItemGroup>
    <PackageReference Remove="@(PackageReference)" />
  </ItemGroup>

  <Import Project="$([MSBuild]::GetDirectoryNameOfFileAbove($(NuspecBasePath), Directory.Build.targets))\Directory.Build.targets" Condition="Exists('$([MSBuild]::GetDirectoryNameOfFileAbove($(NuspecBasePath), Directory.Build.targets))\Directory.Build.targets')" />
  <Import Project="Sdk.targets" Sdk="Microsoft.NET.Sdk" />
</Project>
